<html>

<head>
	<title>Brucheion</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script type="text/javascript" src="http://localhost{{.Port}}/js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/openseadragon.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/openseadragon-guides.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/selection.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/selectionoverlay.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/selectionrect.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/dragging.js"></script>
	<script type="text/javascript" src="http://localhost{{.Port}}/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="http://localhost{{.Port}}/static/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="http://localhost{{.Port}}/static/css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="http://localhost{{.Port}}/static/css/application.css">
	<link rel="stylesheet" href="http://localhost{{.Port}}/static/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="http://localhost{{.Port}}/static/css/bulma.css">
	<style>
		.tile-resizable {
			resize: both;
			overflow: hidden
		}
		.yourClass { background-color: rgb(71, 206, 192);
color: black; }
	</style>
</head>

<body>
	<div class="container is-fluid">
		<nav class="nav has-shadow">
			<div class="container">
				<div class="nav-left">
					<p class="nav-item">
						<img src="/static/img/BrucheionLogo.png" alt="Brucheion logo">
					</p>
					<p class="nav-item is-tab is-hidden-mobile is-active">Brucheion 1.0.0</p>
				</div>
				<div>
					<p class="button is-primary is-large is-inverted">Consolidate Text</p>
				</div>
				<div class="nav-right nav-menu">
					<p class="nav-item is-tab">
						User: {{printf "%s" .User}}
					</p>
				</div>
				<div class="nav-right nav-menu">
					<p class="nav-item is-tab">
						<a href="http://localhost{{.Port}}/{{.User}}/export/{{.User}}">
							<i class="fa fa-download">CEX-Download</i>
						</a>
					</p>
				</div>

			</div>
		</nav>
		<br/>
		<section>
			<div class="tile is-ancestor">
				<div class="tile is-parent is-vertical column is-4 ">
					<div class="tile is-parent">
						<div class="container">
							<div class="card is-fullwidth">
								<header class="card-header">
									<p class="card-header-title">
										Metadata: {{.Title}}
									</p>
									<a href="#" class="card-header-icon card-toggle">
										<span class="icon">
											<i class="fa fa-angle-down"></i>
										</span>
									</a>
								</header>
								<div class="card-content is-hidden">
									<div class="content">
										<p class="has-text-right">
											<a class="button is-small" href="/{{.User}}/editcat/{{.Title}}">EDIT METADATA</a>
										</p>
										<br/>
										<table>
											<tr>
												<td>WorkURN: {{.CatID}}</td>
												<td>Scheme: {{.CatCit}}</td>
											</tr>
											<tr>
												<td>Workgroup: {{.CatGroup}}</td>
												<td>Title: {{.CatWork}}</td>
											</tr>
											<tr>
												<td>Version: {{.CatVers}}</td>
												<td>Exemplar: {{.CatExmpl}}</td>
											</tr>
											<tr>
												<td>Online: {{.CatOn}}</td>
												<td>Language: {{.CatLan}}</td>
											</tr>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="tile is-parent">
							<div class="container">
								<div class="card is-fullwidth">
									<header class="card-header">
										<p class="card-header-title">
											Text: {{.Title}}
										</p>
										<a href="#" class="card-header-icon card-toggle">
											<span class="icon">
												<i class="fa fa-angle-down"></i>
											</span>
										</a>
									</header>
									<div class="card-content">
										<div class="content">
												{{.Text}}
										</div>
									</div>
								</div>
							</div>
						</div>
				</div>

				<div class="tile is-parent is-vertical column is-4 ">
						<div class="tile is-parent">
							<div class="container">
								<div class="card is-fullwidth">
									<header class="card-header">
										<p class="card-header-title">
											Metadata: {{.Title2}}
										</p>
										<a href="#" class="card-header-icon card-toggle">
											<span class="icon">
												<i class="fa fa-angle-down"></i>
											</span>
										</a>
									</header>
									<div class="card-content is-hidden">
										<div class="content">
											<p class="has-text-right">
												<a class="button is-small" href="/{{.User}}/editcat/{{.Title}}">EDIT METADATA</a>
											</p>
											<br/>
											<table>
												<tr>
													<td>WorkURN: {{.CatID2}}</td>
													<td>Scheme: {{.CatCit2}}</td>
												</tr>
												<tr>
													<td>Workgroup: {{.CatGroup2}}</td>
													<td>Title: {{.CatWork2}}</td>
												</tr>
												<tr>
													<td>Version: {{.CatVers2}}</td>
													<td>Exemplar: {{.CatExmpl2}}</td>
												</tr>
												<tr>
													<td>Online: {{.CatOn2}}</td>
													<td>Language: {{.CatLan2}}</td>
												</tr>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
	
						<div class="tile is-parent">
								<div class="container">
									<div class="card is-fullwidth">
										<header class="card-header">
											<p class="card-header-title">
												Text: {{.Title2}}
											</p>
											<a href="#" class="card-header-icon card-toggle">
												<span class="icon">
													<i class="fa fa-angle-down"></i>
												</span>
											</a>
										</header>
										<div class="card-content">
											<div class="content">
													{{.Text2}}
											</div>
										</div>
									</div>
								</div>
							</div>
					</div>

					<div class="tile is-parent is-vertical column is-4 ">
							<div class="tile is-parent">
								<div class="container">
									<div class="card is-fullwidth">
										<header class="card-header">
											<p class="card-header-title">
												Metadata: Consolidated Text
											</p>
											<a href="#" class="card-header-icon card-toggle">
												<span class="icon">
													<i class="fa fa-angle-down"></i>
												</span>
											</a>
										</header>
										<div class="card-content is-hidden">
											<div class="content">
													<form method="post" action="">
															<div class="form-group">
																	<label for="workurn">WorkURN:</label>
																	<input type="text" class="form-control" id="workurn" value="{{.CatID}}">
																	<span class="help-block">Please enter a CTS URN: It has 4 colons (and ends on one ending on one). After "urn:cts:[yourcollection]:", you have to provide at least workgroup ID and work ID separated by a ".". Additionaly, you can provide version and exemplar IDs.</span>
																	<label for="scheme">Scheme:</label>
																	<input type="text" class="form-control" id="scheme" value="{{.CatCit}}">
																	<span class="help-block">What is the citation scheme of the work? For example, "1.1.1" could resemble "book/chapter/paragraph".</span>
																	<label for="workgroup">Workgroup:</label>
																	<input type="text" class="form-control" id="workgroup" value="{{.CatGroup}}">
																	<span class="help-block">Workgroup in natural language.</span>
																	<label for="title">Title:</label>
																	<input type="text" class="form-control" id="title" value="{{.CatWork}}">
																	<span class="help-block">Title in natural language.</span>
																	<label for="version">Version:</label>
																	<input type="text" class="form-control" id="version" value="{{.CatVers}}">
																	<span class="help-block">Version in natural language.</span>
																	<label for="exemplar">Exemplar:</label>
																	<input type="text" class="form-control" id="exemplar" value="{{.CatExmpl}}">
																	<span class="help-block">Exemplar in natural language.</span>
																	<label for="online">Online:</label>
																	<input type="text" class="form-control" id="online" value="{{.CatOn}}">
																	<span class="help-block">Boolean; usually "true".</span>
																	<label for="language">Language:</label>
																	<input type="text" class="form-control" id="language" value="{{.CatLan}}">
																	<span class="help-block">Language ID</span>
																</div>
																<input class="button is-primary" type="submit" value="Save">
													</form>
											</div>
										</div>
									</div>
								</div>
							</div>
		
							<div class="tile is-parent">
									<div class="container">
										<div class="card is-fullwidth">
											<header class="card-header">
												<p class="card-header-title">
													Consolidated Text:
												</p>
												<a href="#" class="card-header-icon card-toggle">
													<span class="icon">
														<i class="fa fa-angle-down"></i>
													</span>
												</a>
											</header>
											<div class="card-content">
												<div class="content">
														<div><textarea id="result" name="text" rows="30", cols="40"></textarea></div>
					<div><input class="button is-primary" type="submit" value="Save"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
						</div>

				
			</div>
		</section>

		
		<footer>
			<br/>
			<p>Brucheion is ©2017–2018 Thomas Koentges. CITE/CTS is ©2002–2017 Neel Smith and Christopher Blackwell. Brucheion is available
                for use, modification, and distribution under the terms of the
                <a href="https://opensource.org/licenses/gpl-3.0.html">GPL 3.0</a> licence. Brucheion's image citation tool <a href="">BrIC</a> is ©2018 Thomas Koentges and based on Christopher Blackwell's and Mees Gelein's
                <a href="https://github.com/cite-architecture/ict2">ICT2</a> and on
                <a href="http://openseadragon.github.io">Openseadragon</a>.</p>
		</footer>
	</div>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			let cardToggles = document.getElementsByClassName('card-toggle');
			for (let i = 0; i < cardToggles.length; i++) {
				cardToggles[i].addEventListener('click', e => {
					e.currentTarget.parentElement.parentElement.childNodes[3].classList.toggle('is-hidden');
				});
			}
		});
	</script>
	<script> function moveWords(num) { 
			var txt=document.getElementById("result").value; 
			txt=txt + num + " "; 
			document.getElementById("result").value=txt; 
			} 
	</script>
</body>
<script>
		$('w').hover(function(){
				//alert( $(this).attr("title"));
				$("w[alignment='" + $(this).attr("alignment") + "']").addClass('yourClass');
		}, function() {
				$("w[alignment='" + $(this).attr("alignment") + "']").removeClass('yourClass');
		});
		$( 'w' ).click(function() {
			moveWords(this.innerHTML)
});
		</script>

</html>